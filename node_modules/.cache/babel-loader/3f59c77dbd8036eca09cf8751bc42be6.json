{"ast":null,"code":"import Pubsub from 'pubsub-js';\nexport default {\n  name: 'Video',\n\n  data() {\n    return {\n      latestMvList: ['内地', '港台', '欧美', '日本', '韩国'],\n      currentIndex: -1,\n      //当前最新MV点击的选项索引\n      // isClick:,\n      latestMvDetail: [],\n      //用于存储资源\n      hotMvDetail: [],\n      //热播MV资源\n      WYMvDetail: [],\n      //网易云出品MV资源\n      MVRankList: ['内地', '港台', '欧美', '日本', '韩国'],\n      //MV排行榜分类\n      MVRankDetail: [],\n      //MV排行榜\n      RankCurrentIndex: -1 //当前MV排行榜点击的选项索引\n\n    };\n  },\n\n  methods: {\n    async getVideoList(index) {\n      //获取最新MV列表和资源\n      const {\n        data: res\n      } = await this.$http.get('/mv/first', {\n        params: {\n          area: this.latestMvList[index],\n          limit: 8\n        }\n      });\n      this.latestMvDetail = res.data; // console.log(this.latestMvDetail)\n    },\n\n    Switch(index) {\n      //最新MV切换\n      this.currentIndex = index; //更改当前点击选项\n\n      this.getVideoList(index);\n    },\n\n    async getHotList() {\n      //获得网易出品资源\n      const {\n        data\n      } = await this.$http.get('/mv/exclusive/rcmd', {\n        params: {\n          limit: 8\n        }\n      });\n      this.hotMvDetail = data.data; // console.log(this.hotMvDetail)\n    },\n\n    async getWYList() {\n      const {\n        data\n      } = await this.$http.get('/personalized/mv', {// params:{limit:8}\n      });\n      this.WYMvDetail = data.result; // console.log(data)\n    },\n\n    async getMVRank(index) {\n      //获取MV排行榜\n      const {\n        data: res\n      } = await this.$http.get('/top/mv', {\n        params: {\n          limit: 10,\n          area: this.MVRankList[index]\n        }\n      });\n      this.MVRankDetail = res.data;\n      console.log(this.MVRankDetail);\n    },\n\n    SwitchRank(index) {\n      //MV排行榜切换\n      this.RankCurrentIndex = index;\n      this.getMVRank(index);\n    },\n\n    sendURLID(id) {\n      //向BroadCast组件发送video的id进而获取URL\n      this.$router.push({\n        name: 'BroadCast'\n      });\n      Pubsub.publish('getURL', id);\n    }\n\n  },\n\n  created() {\n    this.getVideoList(0);\n    this.getHotList();\n    this.getWYList();\n    this.getMVRank(0);\n  }\n\n};","map":{"version":3,"mappings":"AAqEA;AACA;EACAA,aADA;;EAEAC;IACA;MACAC,4CADA;MAEAC,gBAFA;MAEA;MACA;MACAC,kBAJA;MAIA;MACAC,eALA;MAKA;MACAC,cANA;MAMA;MACAC,0CAPA;MAOA;MACAC,gBARA;MAQA;MACAC,oBATA,CASA;;IATA;EAWA,CAdA;;EAeAC;IACA;MAAA;MACA;QAAAT;MAAA;QACAU;UACAC,8BADA;UAEAC;QAFA;MADA;MAMA,+BAPA,CAQA;IACA,CAVA;;IAWAC;MAAA;MACA,0BADA,CACA;;MACA;IACA,CAdA;;IAeA;MAAA;MACA;QAAAb;MAAA;QACAU;UACAE;QADA;MADA;MAKA,6BANA,CAOA;IACA,CAvBA;;IAwBA;MACA;QAAAZ;MAAA,8CACA;MADA;MAGA,8BAJA,CAKA;IACA,CA9BA;;IA+BA;MAAA;MACA;QAAAA;MAAA;QACAU;UACAE,SADA;UAEAD;QAFA;MADA;MAMA;MACAG;IACA,CAxCA;;IAyCAC;MAAA;MACA;MACA;IACA,CA5CA;;IA6CAC;MAAA;MACA;QACAjB;MADA;MAGAkB;IACA;;EAlDA,CAfA;;EAoEAC;IACA;IACA;IACA;IACA;EACA;;AAzEA","names":["name","data","latestMvList","currentIndex","latestMvDetail","hotMvDetail","WYMvDetail","MVRankList","MVRankDetail","RankCurrentIndex","methods","params","area","limit","Switch","console","SwitchRank","sendURLID","Pubsub","created"],"sourceRoot":"src/components/video","sources":["Video.vue"],"sourcesContent":["<template>\r\n  <div class=\"box\">\r\n    <div class=\"latestMV\">  <!--最新MV-->\r\n        <div class=\"latestHead\">\r\n            <span>最新MV</span>\r\n            <div class=\"latestHeadSort\">\r\n                <span v-for=\"(item,index) in latestMvList\" @click=\"Switch(index)\" :key=\"index\"  :class=\"{'spanClick':index == currentIndex}\">{{item}}</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"lateMVlist\">\r\n            <div v-for=\"item in latestMvDetail\" :key=\"item.id\">\r\n                <img :src=\"item.cover\" alt=\"\" class=\"lateMV_img\" @click=\"sendURLID(item.id)\">\r\n                <div class=\"img_desciption\">\r\n                    <h3>{{item.name}}</h3>\r\n                    <span>{{item.artistName}}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"latestMV\">   <!--网易云出品-->\r\n        <div class=\"latestHead\">\r\n            <span>网易云出品</span>\r\n        </div>\r\n        <div class=\"lateMVlist\">\r\n            <div v-for=\"item in hotMvDetail\" :key=\"item.id\">\r\n                <img :src=\"item.cover\" alt=\"\" class=\"lateMV_img\">\r\n                <div class=\"img_desciption\">\r\n                    <h3>{{item.name}}</h3>\r\n                    <span>{{item.artistName}}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"latestMV\">   <!--热播MV-->\r\n            <div class=\"latestHead\">\r\n                <span>热播MV</span>\r\n\r\n            </div>\r\n            <div class=\"lateMVlist\">\r\n                <div v-for=\"item in WYMvDetail\" :key=\"item.id\">\r\n                    <img :src=\"item.picUrl\" alt=\"\" class=\"lateMV_img\">\r\n                    <div class=\"img_desciption\">\r\n                        <span class=\"wymVText\">{{item.name}}</span>\r\n                        <span>{{item.artistName}}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n    </div>\r\n    <div>  <!--MV排行榜-->\r\n        <div class=\"latestHead \">\r\n            <span>MV排行榜</span>\r\n            <div class=\"latestHeadSort\">\r\n                <span v-for=\"(item,index) in MVRankList\" @click=\"SwitchRank(index)\" :key=\"index\"  :class=\"{'spanClick':RankCurrentIndex == index}\">{{item}}</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"lateMVlist \">\r\n                <div v-for=\"item in MVRankDetail\" :key=\"item.id\" class=\"MVRankList\">\r\n                    <img :src=\"item.cover\" alt=\"\" class=\"lateMV_img Rank_img\">\r\n                    <div class=\"img_desciption\">\r\n                        <h3>{{item.name}}</h3>\r\n                        <span>{{item.artistName}}</span>\r\n                    </div>\r\n                </div>\r\n        </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Pubsub from 'pubsub-js'\r\nexport default {\r\n    name:'Video',\r\n    data(){\r\n        return {\r\n            latestMvList:['内地','港台','欧美','日本','韩国'],\r\n            currentIndex:-1,  //当前最新MV点击的选项索引\r\n            // isClick:,\r\n            latestMvDetail:[],   //用于存储资源\r\n            hotMvDetail:[],  //热播MV资源\r\n            WYMvDetail:[], //网易云出品MV资源\r\n            MVRankList:['内地','港台','欧美','日本','韩国'],//MV排行榜分类\r\n            MVRankDetail:[],  //MV排行榜\r\n            RankCurrentIndex:-1,  //当前MV排行榜点击的选项索引\r\n        }\r\n    },\r\n    methods:{\r\n        async getVideoList(index){   //获取最新MV列表和资源\r\n            const {data:res}=await this.$http.get('/mv/first',{\r\n                params:{\r\n                    area:this.latestMvList[index],\r\n                    limit:8\r\n                }\r\n            })\r\n            this.latestMvDetail = res.data\r\n            // console.log(this.latestMvDetail)\r\n        },\r\n        Switch(index){   //最新MV切换\r\n        this.currentIndex = index  //更改当前点击选项\r\n            this.getVideoList(index)\r\n        },\r\n        async getHotList(){  //获得网易出品资源\r\n            const {data} = await this.$http.get('/mv/exclusive/rcmd',{\r\n                params:{\r\n                    limit:8\r\n                }\r\n            })\r\n            this.hotMvDetail = data.data \r\n            // console.log(this.hotMvDetail)\r\n        },\r\n        async getWYList(){\r\n            const {data} = await this.$http.get('/personalized/mv',{\r\n                // params:{limit:8}\r\n            })\r\n             this.WYMvDetail = data.result\r\n            // console.log(data)\r\n        },\r\n        async getMVRank(index){   //获取MV排行榜\r\n            const {data:res} = await this.$http.get('/top/mv',{\r\n                params:{\r\n                    limit:10,\r\n                    area:this.MVRankList[index]\r\n                }\r\n            })\r\n            this.MVRankDetail = res.data\r\n            console.log(this.MVRankDetail)\r\n        },\r\n        SwitchRank(index){  //MV排行榜切换\r\n            this.RankCurrentIndex = index\r\n            this.getMVRank(index)\r\n        },\r\n        sendURLID(id){  //向BroadCast组件发送video的id进而获取URL\r\n            this.$router.push({\r\n                name:'BroadCast'\r\n            })\r\n            Pubsub.publish('getURL',id)\r\n        }\r\n\r\n    },\r\n    created(){\r\n        this.getVideoList(0)\r\n        this.getHotList()\r\n        this.getWYList()\r\n        this.getMVRank(0)\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* 总体大盒子 */\r\n  .box {\r\n    /* 设置大小 */\r\n    width: 1200px;\r\n    /* 设置居中 */\r\n    margin: 0 auto; \r\n    /* background-color: rgb(177, 194, 203); */\r\n    /* 关闭自带的line-height */\r\n    line-height: 0;\r\n    /* height: 100%; */\r\n    /* margin-top: 3rem; */\r\n  }\r\n  .box>div{\r\n    margin-top: 1rem;\r\n    padding: 50px;\r\n  }\r\n  /* 最新MV部分 */\r\n  .latestHead{\r\n    display: flex;\r\n    /* justify-content: space-around; */\r\n    /* height: 500px; */\r\n  }\r\n  .latestHead>span{\r\n    font-size: .6rem;\r\n    \r\n  }\r\n  .latestHeadSort{\r\n    font-size: .4rem;\r\n    color: rgb(96, 102, 96);\r\n  }\r\n  .latestHeadSort span{\r\n     padding:0 .2rem 0 .2rem ;\r\n     border-right: solid .01rem rgb(53, 53, 53);\r\n  }\r\n    /* 点击时绑定的样式 */\r\n    .spanClick{\r\n        /* cursor: pointer; */\r\n        /* 加入优先级，不然hover会生效 */\r\n        color: rgb(236, 65, 65) !important;  \r\n        background-color: rgb(63, 45, 45);\r\n        border-radius: .2rem;\r\n  }\r\n    .latestHeadSort>span:hover{\r\n        cursor: pointer;\r\n        color: rgb(208, 208, 208);\r\n  }\r\n  .lateMV_img{\r\n    /* 设置每张图片的大小 */\r\n    width: 5rem;\r\n    height: 4rem;\r\n    /* 设置为块元素 */\r\n    display: block;\r\n    border-radius: .5rem;\r\n}\r\n.lateMVlist{\r\n    display: flex;\r\n    /* width: 1200px; */\r\n    flex-direction: row;\r\n    /* align-content: stretch; */\r\n        justify-content: center;\r\n    flex-wrap: wrap;\r\n}\r\n.lateMVlist>div{\r\n    margin-right: .3rem;\r\n    margin-top: 1rem;\r\n}\r\n\r\n.img_desciption{\r\n    width:250px;\r\n    height: 70px;\r\n            /* overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    display: -webkit-box;\r\n    -webkit-line-clamp: 1;\r\n    -webkit-box-orient: vertical; */\r\n}\r\n.img_desciption>h3{\r\n    font-size: .3rem;\r\n    line-height: .3rem;\r\n}\r\n.img_desciption>span{\r\n    font-size: .3rem;\r\n}\r\n/* MV排行榜附加 */\r\n\r\n.MVRankList{\r\n    display: flex;\r\n    width: 10rem;\r\n    height: 4rem;\r\n    border-bottom:solid 1px rgb(53, 53, 53);\r\n    border-right: solid 1px rgb(53, 53, 53);\r\n}\r\n.Rank_img{\r\n    height: 2.4rem;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}