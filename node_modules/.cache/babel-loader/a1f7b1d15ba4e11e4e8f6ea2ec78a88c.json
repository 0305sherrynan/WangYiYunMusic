{"ast":null,"code":"import { nanoid } from 'nanoid';\nexport default {\n  name: 'SongList',\n\n  data() {\n    return {\n      activeName: 0,\n      //用于标志被激活的tab\n      OnePlayLists: {},\n      //用于存储最上方的资源\n      MusicSortLists: [],\n      //存放歌单分类标签\n      MusicSingleList: [],\n      //存放标签所对应资源歌单\n      total: 0,\n      //单个歌单所存储的歌数目\n      currentPage: 1 //当前页页号\n\n    };\n  },\n\n  methods: {\n    handleClick() {\n      //tab被点击时触发获取歌单事件\n      this.OnePlayLists = {};\n      this.MusicSingleList = []; //清空上一次请求的资源存储\n\n      this.getSingleMusic();\n      this.getOnePlayLists();\n    },\n\n    async getOnePlayLists() {\n      //请求最上方资源\n      const res = await this.$http.get('/top/playlist/highquality', {\n        params: {\n          limit: 1,\n          cat: this.MusicSortLists[0].name\n        }\n      }); // console.log(res)\n\n      this.OnePlayLists = res.data.playlists[0]; //获取资源\n    },\n\n    async getMusicSortLists() {\n      //获取歌单种类名\n      const sortLists = await this.$http.get('/playlist/highquality/tags', {\n        params: {\n          limit: 10 //取出的数量为10\n\n        }\n      });\n      console.log(sortLists); //将标签放入array中\n\n      let temp = [];\n      sortLists.data.tags.forEach((element, index) => {\n        if (index <= 9) {\n          this.MusicSortLists.push({\n            id: element.id,\n            name: element.name\n          });\n        }\n      }); //  this.MusicSortLists=temp\n      //  console.log(this.MusicSortLists)\n    },\n\n    async getSingleMusic() {\n      //点击标签时获取对应资源\n      const res = await this.$http.get('/top/playlist', {\n        params: {\n          limit: 12,\n          //取出单页歌单数量\n          offset: (this.currentPage - 1) * 12,\n          //用于分页\n          cat: this.MusicSortLists[this.activeName].name //标签\n\n        }\n      }); // console.log(res)\n      //资源存储\n\n      this.MusicSingleList = res.data.playlists;\n      this.total = res.data.total;\n    },\n\n    handleCurrentChange(val) {\n      //当前页号赋值和再次请求资源和渲染页面\n      this.currentPage = val;\n      this.getSingleMusic();\n    },\n\n    async initLoad() {\n      //定义一个异步函数，放在created中\n      await this.getMusicSortLists();\n      this.getOnePlayLists();\n      this.getSingleMusic();\n    }\n\n  },\n\n  created() {\n    //刚创建路由时候就必须请求资源\n    this.initLoad();\n  },\n\n  computed: {\n    az: function () {\n      return nanoid();\n    }\n  }\n};","map":{"version":3,"mappings":"AAqCA;AACA;EACAA,gBADA;;EAEAC;IACA;MACAC,aADA;MACA;MACAC,gBAFA;MAEA;MACAC,kBAHA;MAGA;MACAC,mBAJA;MAIA;MACAC,QALA;MAKA;MACAC,cANA,CAMA;;IANA;EAQA,CAXA;;EAYAC;IACAC;MAAA;MACA;MACA,0BAFA,CAEA;;MACA;MACA;IACA,CANA;;IAOA;MAAA;MACA;QAAAC;UACAC,QADA;UAEAC;QAFA;MAAA,GADA,CAKA;;MACA,0CANA,CAMA;IACA,CAdA;;IAeA;MAAA;MACA;QACAF;UACAC,SADA,CACA;;QADA;MADA;MAMAE,uBAPA,CAQA;;MACA;MACAC;QACA;UACA,yBACA;YACAC,cADA;YAEAf;UAFA,CADA;QAMA;MACA,CATA,EAVA,CAoBA;MACA;IACA,CArCA;;IAsCA;MAAA;MACA;QACAU;UACAC,SADA;UACA;UACAK,mCAFA;UAEA;UACAJ,8CAHA,CAGA;;QAHA;MADA,GADA,CAQA;MACA;;MACA;MACA;IAEA,CAnDA;;IAoDAK;MAAA;MACA;MACA;IACA,CAvDA;;IAwDA;MAAA;MACA;MACA;MACA;IACA;;EA5DA,CAZA;;EA0EAC;IAAA;IACA;EACA,CA5EA;;EA6EAC;IACAC;MACA;IACA;EAHA;AA7EA","names":["name","data","activeName","OnePlayLists","MusicSortLists","MusicSingleList","total","currentPage","methods","handleClick","params","limit","cat","console","sortLists","id","offset","handleCurrentChange","created","computed","az"],"sourceRoot":"src/components/songlist","sources":["SongList.vue"],"sourcesContent":["<template>\n  <el-card class=\"box-card\" >\n    <!-- 精品菜单区域 -->\n    <div  class=\"OnePlayLists\">\n        <div class=\"icon-wrap\">\n            <img :src=\"OnePlayLists.coverImgUrl\" alt=\"\" class=\"bigImg\">\n        </div>\n        <div class=\"content-wrap\">\n            <div class=\"tag\">精品菜单</div>\n            <p class=\"info\">{{OnePlayLists.name}}</p>\n            <p class=\"info_bottom\"> {{OnePlayLists.copywriter}}</p>\n        </div>\n\n    </div>\n    <!-- 歌单列表展示 -->\n    <el-tabs  v-model=\"activeName\" @tab-click=\"handleClick\" >\n        <el-tab-pane v-for=\"(item,index) in MusicSortLists\"   :key=\"item.id\" :name=\"index.toString()\" >\n             <span slot=\"label\" class=\"tagText\"> {{item.name}}</span>\n            <div v-for=\"(item) in MusicSingleList\" :key=\"item.id\" class=\"MusicSingleList_list\" >\n                  <img :src=\"item.coverImgUrl\" alt=\"\" class=\"MusicSingleList_img\" @click=\"getSpecialLists(item.id,item)\">  <!--getSpecialLists详情可见global.js-->\n                  <span>{{item.name}}</span>\n            </div>\n        </el-tab-pane>\n    </el-tabs>\n    <el-pagination\n    @current-change=\"handleCurrentChange\"\n    :current-page.sync=\"currentPage\"\n    :page-size=\"12\"\n    layout=\"prev,pager,next\"\n    :total=\"total\"\n    >\n\n    </el-pagination>\n  </el-card>\n</template>\n\n<script>\nimport {nanoid} from 'nanoid'\nexport default {\n    name:'SongList',\n    data(){\n      return{\n        activeName:0,  //用于标志被激活的tab\n          OnePlayLists:{},//用于存储最上方的资源\n          MusicSortLists:[], //存放歌单分类标签\n          MusicSingleList:[]  , //存放标签所对应资源歌单\n          total:0,              //单个歌单所存储的歌数目\n          currentPage:1,        //当前页页号\n      }\n    },\n    methods:{\n        handleClick(){  //tab被点击时触发获取歌单事件\n        this.OnePlayLists={}\n        this.MusicSingleList=[] //清空上一次请求的资源存储\n        this.getSingleMusic()\n        this.getOnePlayLists()\n        },\n        async getOnePlayLists(){  //请求最上方资源\n            const res=await this.$http.get('/top/playlist/highquality',{params:{\n              limit:1,\n              cat:this.MusicSortLists[0].name\n            }})\n            // console.log(res)\n            this.OnePlayLists=res.data.playlists[0]  //获取资源\n        },\n        async getMusicSortLists(){  //获取歌单种类名\n           const sortLists=await this.$http.get('/playlist/highquality/tags',{\n            params:{\n              limit:10,//取出的数量为10\n            }\n\n           })\n           console.log(sortLists)\n          //将标签放入array中\n          let temp=[]\n           sortLists.data.tags.forEach((element,index) => {\n            if(index<=9){\n                          this.MusicSortLists.push(\n              {\n                id:element.id,\n                name:element.name\n              }\n            )\n            }\n           });\n          //  this.MusicSortLists=temp\n          //  console.log(this.MusicSortLists)\n        },\n        async getSingleMusic(){  //点击标签时获取对应资源\n          const res=await this.$http.get('/top/playlist',{\n                params:{\n                  limit:12,//取出单页歌单数量\n                  offset:(this.currentPage-1)*12,   //用于分页\n                  cat:this.MusicSortLists[this.activeName].name //标签\n                }\n          })\n          // console.log(res)\n          //资源存储\n          this.MusicSingleList=res.data.playlists \n          this.total=res.data.total\n           \n        },\n        handleCurrentChange(val){ //当前页号赋值和再次请求资源和渲染页面\n           this.currentPage=val  \n           this.getSingleMusic()\n        },\n        async initLoad(){   //定义一个异步函数，放在created中\n          await this.getMusicSortLists()\n          this.getOnePlayLists()\n          this.getSingleMusic()\n        }\n    },\n    created(){     //刚创建路由时候就必须请求资源\n        this.initLoad()\n    },\n    computed:{\n      az:function(){\n        return nanoid()\n      }\n    }\n}\n</script>\n\n<style scoped>\n\n  .OnePlayLists{\n    /* 使用flex布局 */\n    display: flex;  \n  }\n  .OnePlayLists:before,\n  .OnePlayLists:after {\n    display: table;\n    content: \"\";\n  }\n  .OnePlayLists:after {\n    clear: both\n  }\n\n  .box-card {\n    /* 设置大小 */\n    width: 1200px;\n    /* 设置居中 */\n    margin: 0 auto; \n    background-color: rgb(43, 43, 43);\n    /* 将总体的line-height关闭 */\n    line-height: 0;\n    border: 0px solid red;\n  }\n\n  /* 上方大相片 */\n  .bigImg{\n    width: 3.2rem;\n    height: 3.2rem;\n  }\n  .icon-wrap{\n    /* 清除默认line-height */\n    line-height: 0;\n  }\n /* 精品菜单 */\n .tag{\n    /* 文字大小 */\n    font-size: .32rem;\n    /* 文字颜色 */\n    color: rgb(201, 153, 93);\n    /* 宽度 */\n    width: 2rem;\n    /* 高度 */\n    height: .6rem;\n    /* 保证垂直居中 */\n    line-height: .6rem;\n        /* 文本水平居中 */\n    text-align: center;\n    /* 边框 */\n    border: 1px solid rgb(231, 170, 90);\n    border-radius: 40px;\n }\n  /* 上方文字 */\n  .info{\n    /*文字大小  */\n   font-size: 0.35rem;\n   /* 文字颜色 */\n   color: white;\n   /* 高度和保持垂直居中 */\n    height: .2rem;\n    line-height: .2rem;\n    /* 文本水平居中 */\n    text-align: center;\n  }\n  /* 文字 */\n  .info_bottom{\n        /*文字大小  */\n   font-size: 0.22rem;\n   /* 文字颜色 */\n   color: rgb(166, 166, 168);\n   /* 设置高度和垂直居中 */\n    height: .3rem;\n    line-height: .3rem;\n    /* 文字左对齐 */\n    text-align: left;\n  }\n\n  .content-wrap{\n    margin-left: .2rem;\n  }\n\n\n\n/* 歌单资源区 */\n.tagText{\n  color: rgb(135, 135, 135);\n}\n.MusicSingleList_img{\n  border-radius: .2rem;\n  width: 4rem;\n  height: 4rem;\n  cursor: pointer;\n}\n\n.MusicSingleList_list{\n  display: inline-block;\n  margin-left: 1rem;\n  width: 4rem;\n  height: 4rem;\n  /* 设置上边距 */\n  margin-top: 1rem;\n}\n.MusicSingleList_list>span{\n  color: rgb(208, 208, 208);\nwidth: 4rem;\n    font-size: .001rem;\n    height: 1rem;\n    line-height: 1rem;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    -webkit-box-orient: vertical;\n}\n</style>"]},"metadata":{},"sourceType":"module"}