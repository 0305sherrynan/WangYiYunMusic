{"ast":null,"code":"import Pubsub from 'pubsub-js'; //引入消息订阅与发布\n\nexport default {\n  name: 'BroadCast',\n\n  data() {\n    return {\n      videoUrl: null,\n      //视频url\n      relatedResource: [],\n      relatedUrl: null //相关视频url\n\n    };\n  },\n\n  methods: {\n    async getVideoUrl(id) {\n      const {\n        data: res\n      } = await this.$http.get('/mv/url', {\n        params: {\n          id\n        }\n      });\n      this.videoUrl = res.data.url;\n      const {\n        data: res1\n      } = await this.$http.get('/related/allvideo', {\n        params: {\n          id\n        }\n      });\n      this.relatedResource = res1.data;\n      console.log(this.relatedImg);\n    }\n\n  },\n\n  created() {\n    Pubsub.subscribe('getURL', (msgName, data) => {\n      this.getVideoUrl(data);\n    });\n  }\n\n};","map":{"version":3,"mappings":"AAiBA,+B,CAAA;;AACA;EACAA,iBADA;;EAEAC;IACA;MACAC,cADA;MACA;MACAC,mBAFA;MAGAC,gBAHA,CAGA;;IAHA;EAKA,CARA;;EASAC;IACA;MACA;QAAAJ;MAAA;QACAK;UACAC;QADA;MADA;MAKA;MACA;QAAAN;MAAA;QACAK;UACAC;QADA;MADA;MAKA;MACAC;IACA;;EAfA,CATA;;EA0BAC;IACAC;MACA;IACA,CAFA;EAGA;;AA9BA","names":["name","data","videoUrl","relatedResource","relatedUrl","methods","params","id","console","created","Pubsub"],"sourceRoot":"src/components/videoplay","sources":["BroadCast.vue"],"sourcesContent":["<template>\r\n    <div class=\"box\">\r\n        <div class=\"leftbox\">\r\n            <span>视频详情</span>\r\n            <video :src=\"videoUrl\" width=\"600px\" height=\"360px\" controls autoplay></video>\r\n        </div>\r\n        <div class=\"rightbox\">\r\n            <span>相关推荐</span>\r\n            <div v-for=\"(item,index) in relatedResource\" :key=\"index\" class=\"relatedBox\">\r\n                <img :src=\"item.coverUrl\" alt=\"\">\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n</template>\r\n\r\n<script>\r\nimport Pubsub from 'pubsub-js' //引入消息订阅与发布\r\nexport default { \r\n    name:'BroadCast',\r\n    data(){\r\n        return {\r\n            videoUrl:null,  //视频url\r\n            relatedResource:[],\r\n            relatedUrl:null, //相关视频url\r\n        }\r\n    },\r\n    methods:{\r\n        async getVideoUrl(id){\r\n            const {data:res} = await this.$http.get('/mv/url',{\r\n                params:{\r\n                    id\r\n                }\r\n            })\r\n            this.videoUrl = res.data.url\r\n            const {data:res1} = await this.$http.get('/related/allvideo',{\r\n                params:{\r\n                    id\r\n                }\r\n            })\r\n            this.relatedResource = res1.data\r\n            console.log(this.relatedImg)\r\n        }\r\n    },\r\n    created(){\r\n        Pubsub.subscribe('getURL',(msgName,data)=>{\r\n            this.getVideoUrl(data)\r\n        })\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.box{\r\n       /* 设置大小 */\r\n    width: 1200px;\r\n    /* 设置居中 */\r\n    margin: 0 auto; \r\n    display: flex;\r\n}\r\n.leftbox{\r\n    width: 600px;\r\n}\r\n.leftbox>span{\r\n    display: block;\r\n    /* height: 5rem; */\r\n    font-size: .5rem;\r\n    line-height: 1rem;\r\n}\r\n.rightbox{\r\n    width: 300px;\r\n}\r\n.rightbox>span{\r\n    display: block;\r\n    /* height: 5rem; */\r\n    font-size: .5rem;\r\n    line-height: 1rem;\r\n}\r\n.relatedBox{\r\n    margin-top: .5rem;\r\n}\r\n.relatedBox>img{\r\n    width: 5rem;\r\n    height: 3rem;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}