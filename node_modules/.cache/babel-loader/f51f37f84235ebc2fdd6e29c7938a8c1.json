{"ast":null,"code":"import playMiddle from '../assets/img/播放2.png';\nimport lastSong from '../assets/img/上一首.png';\nimport nextSong from '../assets/img/下一首.png';\nimport stop from '../assets/img/暂停.png';\nimport Pubsub from 'pubsub-js'; //引入消息订阅与发布\n\nexport default {\n  name: 'Footer',\n\n  data() {\n    return {\n      playMiddle,\n      lastSong,\n      nextSong,\n      stop,\n      isplay: false,\n      // musicURL:this.$store.state.musicUrl\n      //拖拽条\n      progress: 0,\n      customColor: '#409eff',\n      duration: 0,\n      //总时长\n      currentTime: 0 //当前时长\n\n    };\n  },\n\n  methods: {\n    // 控制暂停播放\n    playMusic() {\n      //  const audio = window.document.querySelector('.musicAudio') //获取audio元素\n      //  console.log(audio)\n      if (this.audio.paused == true) {\n        //目前音频处于暂停状态，转为播放状态\n        this.audio.play();\n      } else this.audio.pause(); //目前音频处于播放状态，转为暂停状态\n\n\n      this.isplay = !this.isplay; //图片切换\n    },\n\n    percentageChange() {\n      //拖拽条动态变化\n      if (this.audio.duration !== NaN) this.progress = this.audio.currentTime / this.audio.duration * 100; // 拖拽条随着timeupdate事件的发生而改变\n      //  console.log(this.percentage)\n    }\n\n  },\n\n  mounted() {\n    // 暂停\n    Pubsub.subscribe('stop', (msgName, data) => {\n      this.isplay = false;\n    }); // 正在播放\n\n    Pubsub.subscribe('songDetail', (msgName, data) => {\n      this.isplay = true; // console.log(typeof(this.audio.currentTime/this.audio.duration))\n      // console.log(this.percentage)\n    });\n  },\n\n  computed: {\n    audio() {\n      //动态获取audio标签\n      return window.document.querySelector('.musicAudio');\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAoBA;AACA;AACA;AACA;AACA,+B,CAAA;;AACA;EACAA,cADA;;EAEAC;IACA;MAEAC,UAFA;MAGAC,QAHA;MAIAC,QAJA;MAKAC,IALA;MAMAC,aANA;MAOA;MACA;MACAC,WATA;MAUAC,sBAVA;MAWAC,WAXA;MAWA;MACAC,cAZA,CAYA;;IAZA;EAcA,CAjBA;;EAkBAC;IACA;IACAC;MACA;MACA;MACA;QAAA;QACA;MAEA,CAHA,MAIA,mBAPA,CAOA;;;MACA,2BARA,CAQA;IACA,CAXA;;IAYAC;MAAA;MACA,iCACA,mEAFA,CAEA;MAGA;IACA;;EAlBA,CAlBA;;EAuCAC;IACA;IACAC;MACA;IACA,CAFA,EAFA,CAKA;;IACAA;MACA,mBADA,CAGA;MAIA;IACA,CARA;EASA,CAtDA;;EAuDAC;IACAC;MAAA;MACA;IACA;;EAHA;AAvDA","names":["name","data","playMiddle","lastSong","nextSong","stop","isplay","progress","customColor","duration","currentTime","methods","playMusic","percentageChange","mounted","Pubsub","computed","audio"],"sourceRoot":"src/mainview","sources":["Footer.vue"],"sourcesContent":["<template>\r\n  <div class=\"bigBox\">\r\n    <el-row>\r\n        <el-col :span=\"8\" class=\"middleControls\">\r\n            <div class=\"middleBoxHead\">\r\n                <img :src=\"this.lastSong\" alt=\"\">\r\n                <img :src=\"this.playMiddle\" alt=\"\" @click=\"playMusic\"  v-if=\"!this.isplay\">\r\n                <img :src=\"this.stop\" @click=\"playMusic\" alt=\"\" v-else>\r\n                <img :src=\"this.nextSong\" alt=\"\">\r\n            </div>\r\n            <div class=\"middleBoxBottom\">\r\n                <el-slider v-model=\"progress\"></el-slider>\r\n            </div>\r\n        </el-col>\r\n    </el-row>\r\n    <audio :src=\"this.$store.state.musicUrl\" class=\"musicAudio\"  autoplay @timeupdate=\"percentageChange\" ></audio>\r\n  </div> \r\n</template>\r\n\r\n<script>\r\nimport playMiddle from '../assets/img/播放2.png'\r\nimport lastSong from '../assets/img/上一首.png'\r\nimport nextSong from '../assets/img/下一首.png'\r\nimport stop from '../assets/img/暂停.png'\r\nimport Pubsub from 'pubsub-js' //引入消息订阅与发布\r\nexport default {\r\n    name:'Footer',\r\n    data(){\r\n        return{\r\n            \r\n            playMiddle,\r\n            lastSong,\r\n            nextSong,\r\n            stop,\r\n            isplay:false,\r\n            // musicURL:this.$store.state.musicUrl\r\n            //拖拽条\r\n            progress:0,\r\n            customColor:'#409eff',\r\n            duration:0,  //总时长\r\n            currentTime:0,  //当前时长\r\n        }\r\n    },\r\n    methods:{\r\n        // 控制暂停播放\r\n         playMusic(){\r\n            //  const audio = window.document.querySelector('.musicAudio') //获取audio元素\r\n            //  console.log(audio)\r\n             if(this.audio.paused==true){  //目前音频处于暂停状态，转为播放状态\r\n                this.audio.play()\r\n                \r\n             }\r\n             else this.audio.pause()  //目前音频处于播放状态，转为暂停状态\r\n             this.isplay=!this.isplay  //图片切换\r\n        },\r\n        percentageChange(){  //拖拽条动态变化\r\n                    if(this.audio.duration !== NaN)\r\n                     this.progress=this.audio.currentTime/this.audio.duration*100 // 拖拽条随着timeupdate事件的发生而改变\r\n         \r\n            \r\n            //  console.log(this.percentage)\r\n        }\r\n\r\n    },\r\n    mounted(){\r\n        // 暂停\r\n        Pubsub.subscribe('stop',(msgName,data)=>{\r\n            this.isplay=false\r\n        })\r\n        // 正在播放\r\n        Pubsub.subscribe('songDetail',(msgName,data)=>{\r\n            this.isplay=true\r\n            \r\n            // console.log(typeof(this.audio.currentTime/this.audio.duration))\r\n \r\n           \r\n           \r\n            // console.log(this.percentage)\r\n        })\r\n    },\r\n    computed:{\r\n        audio(){ //动态获取audio标签\r\n            return window.document.querySelector('.musicAudio')\r\n        },\r\n\r\n        \r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n/* 中间按钮和拖拽条 */\r\n.middleControls img{\r\n    width: 1rem;\r\n    height: 1rem;\r\n}\r\n\r\n.middleBoxHead{\r\n    height: 50%;\r\n}\r\n.middleBoxBottom{\r\n    height: 50%;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}