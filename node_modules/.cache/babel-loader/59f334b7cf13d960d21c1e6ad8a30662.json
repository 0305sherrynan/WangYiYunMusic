{"ast":null,"code":"import Pubsub from 'pubsub-js'; //引入消息订阅与发布\n\nexport default {\n  name: 'BroadCast',\n\n  data() {\n    return {\n      videoUrl: null,\n      //视频url\n      videoDetail: {},\n      // 视频细节\n      relatedResource: [] //相关视频url\n      // relatedUrl:null, \n\n    };\n  },\n\n  methods: {\n    async getVideoUrl(id) {\n      //获取视频URL\n      const {\n        data: res\n      } = await this.$http.get('/mv/url', {\n        params: {\n          id\n        }\n      });\n      this.videoUrl = res.data.url;\n      const {\n        data: res1\n      } = await this.$http.get('/related/allvideo', {\n        //获取相关视频URL\n        params: {\n          id\n        }\n      });\n      this.relatedResource = res1.data; // console.log(this.relatedResource)\n    },\n\n    async getVideoDetail(id) {\n      //获取视频细节\n      const {\n        data: res\n      } = await this.$http.get('/mv/detail', {\n        params: {\n          mvid: id\n        }\n      });\n      this.videoDetail = res.data;\n      console.log(this.videoDetail);\n    },\n\n    switchVideo(id) {\n      //点击相关视频切换视频\n      this.getVideoUrl(id);\n    }\n\n  },\n\n  created() {\n    Pubsub.subscribe('getURL', (msgName, data) => {\n      this.getVideoUrl(data);\n      this.getVideoDetail(data);\n    });\n  }\n\n};","map":{"version":3,"mappings":"AAyBA,+B,CAAA;;AACA;EACAA,iBADA;;EAEAC;IACA;MACAC,cADA;MACA;MACAC,eAFA;MAEA;MACAC,mBAHA,CAGA;MAEA;;IALA;EAOA,CAVA;;EAWAC;IACA;MAAA;MACA;QAAAJ;MAAA;QACAK;UACAC;QADA;MADA;MAKA;MACA;QAAAN;MAAA;QAAA;QACAK;UACAC;QADA;MADA;MAKA,iCAZA,CAaA;IACA,CAfA;;IAgBA;MAAA;MACA;QAAAN;MAAA;QACAK;UACAE;QADA;MADA;MAKA;MACAC;IACA,CAxBA;;IAyBAC;MAAA;MACA;IACA;;EA3BA,CAXA;;EAwCAC;IACAC;MACA;MACA;IACA,CAHA;EAIA;;AA7CA","names":["name","data","videoUrl","videoDetail","relatedResource","methods","params","id","mvid","console","switchVideo","created","Pubsub"],"sourceRoot":"src/components/videoplay","sources":["BroadCast.vue"],"sourcesContent":["<template>\r\n    <div class=\"box\">\r\n        <div class=\"leftbox\">\r\n            <span>视频详情</span>\r\n            <video :src=\"videoUrl\" width=\"600px\" height=\"360px\" controls autoplay></video>\r\n            <div>\r\n                <img :src=\"videoDetail.cover\" alt=\"\" width=\"100px\" height=\"100px\">\r\n                <span></span>\r\n            </div>\r\n        </div>\r\n        <div class=\"rightbox\">\r\n            <span>相关推荐</span>\r\n            <div v-for=\"(item,index) in relatedResource\" :key=\"index\" class=\"relatedBox\">\r\n                <img :src=\"item.coverUrl\" alt=\"\" @click=\"switchVideo(item.vid)\">\r\n                <div class=\"rightText\">\r\n                    <span class=\"headText\">{{item.title}}</span>\r\n                    <span class=\"lastText\">{{item.creator[0].userName}}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n</template>\r\n\r\n<script>\r\nimport Pubsub from 'pubsub-js' //引入消息订阅与发布\r\nexport default { \r\n    name:'BroadCast',\r\n    data(){\r\n        return {\r\n            videoUrl:null,  //视频url\r\n            videoDetail:{}, // 视频细节\r\n            relatedResource:[],//相关视频url\r\n\r\n            // relatedUrl:null, \r\n        }\r\n    },\r\n    methods:{ \r\n        async getVideoUrl(id){   //获取视频URL\r\n            const {data:res} = await this.$http.get('/mv/url',{\r\n                params:{\r\n                    id\r\n                }\r\n            })\r\n            this.videoUrl = res.data.url\r\n            const {data:res1} = await this.$http.get('/related/allvideo',{   //获取相关视频URL\r\n                params:{\r\n                    id\r\n                }\r\n            })\r\n            this.relatedResource = res1.data\r\n            // console.log(this.relatedResource)\r\n        },\r\n        async getVideoDetail(id){        //获取视频细节\r\n            const {data:res} = await this.$http.get('/mv/detail',{\r\n                params:{\r\n                    mvid:id\r\n                }\r\n            })\r\n            this.videoDetail = res.data\r\n            console.log(this.videoDetail)\r\n        },\r\n        switchVideo(id){   //点击相关视频切换视频\r\n            this.getVideoUrl(id)\r\n        }\r\n    },\r\n    created(){\r\n        Pubsub.subscribe('getURL',(msgName,data)=>{\r\n            this.getVideoUrl(data)\r\n            this.getVideoDetail(data)\r\n        })\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.box{\r\n       /* 设置大小 */\r\n    width: 1200px;\r\n    /* 设置居中 */\r\n    margin: 0 auto; \r\n    display: flex;\r\n}\r\n.leftbox{\r\n    width: 600px;\r\n}\r\n.leftbox>span{\r\n    display: block;\r\n    /* height: 5rem; */\r\n    font-size: .5rem;\r\n    line-height: 1rem;\r\n}\r\n.rightbox{\r\n    /* width: 300px; */\r\n    margin-left: .9rem;\r\n}\r\n.rightbox>span{\r\n    display: block;\r\n    /* height: 5rem; */\r\n    font-size: .5rem;\r\n    line-height: 1rem;\r\n}\r\n.relatedBox{\r\n    display: flex;\r\n    margin-top: .19rem;\r\n}\r\n.relatedBox>img{\r\n     width: 3.6rem;\r\n    height: 2.3rem;\r\n}\r\n.rightText{\r\n    /* width: 5rem; */\r\n}\r\n.rightText>span{\r\n    display: block;\r\n    width: 5rem;\r\n    font-size: .2rem;\r\n    line-height: .3rem;\r\n}\r\n.headText{\r\n                overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    display: -webkit-box;\r\n    -webkit-line-clamp: 1;\r\n    -webkit-box-orient: vertical;\r\n}\r\n.lastText{\r\n    color:rgb(102, 102, 102);\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}