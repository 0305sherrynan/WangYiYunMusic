{"ast":null,"code":"import playMiddle from '../assets/img/播放2.png';\nimport lastSong from '../assets/img/上一首.png';\nimport nextSong from '../assets/img/下一首.png';\nimport stop from '../assets/img/暂停.png';\nimport Pubsub from 'pubsub-js'; //引入消息订阅与发布\n\nexport default {\n  name: 'Footer',\n\n  data() {\n    return {\n      playMiddle,\n      lastSong,\n      nextSong,\n      stop,\n      isplay: false // musicURL:this.$store.state.musicUrl\n\n    };\n  },\n\n  methods: {\n    // 控制暂停播放\n    playMusic() {\n      const audio = window.document.querySelector('.musicAudio')[0]; //获取audio元素\n\n      if (audio.paused == true) {\n        //目前音频处于暂停状态，转为播放状态\n        audio.play();\n      } else audio.pause();\n\n      this.isplay = !this.isplay;\n    }\n\n  },\n\n  mounted() {\n    // 暂停\n    Pubsub.subscribe('stop', (msgName, data) => {\n      this.isplay = false;\n    }); // 正在播放\n\n    Pubsub.subscribe('songDetail', (msgName, data) => {\n      console.log(this);\n      this.isplay = true;\n    });\n  },\n\n  // computed:{\n  //     musicURL(){\n  //         return this.$store.state.musicUrl\n  //     }\n  // },\n  watch: {//  musicURL(){\n    //       const audio =  window.document.querySelector('.musicAudio')[0] //获取audio元素\n    //     //  audio.play()\n    //                     //监听audio的timeUpdate事件\n    //         audio.addEventListener(\"timeupdate\", () => {\n    //             //获取歌曲的总长度 example: 257s\n    //             this.totalDuration = audio.duration\n    //             //获取歌曲时间\n    //             this.musicDuration = audio.currentTime\n    //             //当前歌曲播放完毕自动播放下一首\n    //             if (audio.currentTime >= audio.duration) {\n    //                 this.changeNextMusic()\n    //             }\n    //         });\n    //         //更新音乐播放状态\n    //         this.isPlay = true\n    // }\n  }\n};","map":{"version":3,"mappings":"AAgBA;AACA;AACA;AACA;AACA,+B,CAAA;;AACA;EACAA,cADA;;EAEAC;IACA;MACAC,UADA;MAEAC,QAFA;MAGAC,QAHA;MAIAC,IAJA;MAKAC,aALA,CAMA;;IANA;EAQA,CAXA;;EAYAC;IACA;IACAC;MACA,8DADA,CACA;;MACA;QAAA;QACAC;MACA,CAFA,MAGAA;;MACA;IACA;;EATA,CAZA;;EAwBAC;IACA;IACAC;MACA;IACA,CAFA,EAFA,CAKA;;IACAA;MACAC;MACA;IACA,CAHA;EAIA,CAlCA;;EAmCA;EACA;EACA;EACA;EACA;EACAC,QACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EAlBA;AAxCA","names":["name","data","playMiddle","lastSong","nextSong","stop","isplay","methods","playMusic","audio","mounted","Pubsub","console","watch"],"sourceRoot":"src/mainview","sources":["Footer.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-row>\r\n        <el-col :span=\"2\" class=\"middleControls\">\r\n            \r\n            <img :src=\"this.lastSong\" alt=\"\">\r\n            <img :src=\"this.playMiddle\" alt=\"\" @click=\"playmusic\"  v-if=\"!this.isplay\">\r\n            <img :src=\"this.stop\" @click=\"playmusic\" alt=\"\" v-else>\r\n            <img :src=\"this.nextSong\" alt=\"\">\r\n        </el-col>\r\n    </el-row>\r\n    <audio :src=\"this.$store.state.musicUrl\" class=\"musicAudio\" controls autoplay ></audio>\r\n  </div> \r\n</template>\r\n\r\n<script>\r\nimport playMiddle from '../assets/img/播放2.png'\r\nimport lastSong from '../assets/img/上一首.png'\r\nimport nextSong from '../assets/img/下一首.png'\r\nimport stop from '../assets/img/暂停.png'\r\nimport Pubsub from 'pubsub-js' //引入消息订阅与发布\r\nexport default {\r\n    name:'Footer',\r\n    data(){\r\n        return{\r\n            playMiddle,\r\n            lastSong,\r\n            nextSong,\r\n            stop,\r\n            isplay:false,\r\n            // musicURL:this.$store.state.musicUrl\r\n        }\r\n    },\r\n    methods:{\r\n        // 控制暂停播放\r\n        playMusic(){\r\n             const audio = window.document.querySelector('.musicAudio')[0] //获取audio元素\r\n             if(audio.paused==true){  //目前音频处于暂停状态，转为播放状态\r\n                audio.play()\r\n             }\r\n             else audio.pause()\r\n             this.isplay=!this.isplay\r\n        },\r\n\r\n    },\r\n    mounted(){\r\n        // 暂停\r\n        Pubsub.subscribe('stop',(msgName,data)=>{\r\n            this.isplay=false\r\n        })\r\n        // 正在播放\r\n        Pubsub.subscribe('songDetail',(msgName,data)=>{\r\n            console.log(this)\r\n            this.isplay=true\r\n        })\r\n    },\r\n    // computed:{\r\n    //     musicURL(){\r\n    //         return this.$store.state.musicUrl\r\n    //     }\r\n    // },\r\n    watch:{\r\n        //  musicURL(){\r\n        //       const audio =  window.document.querySelector('.musicAudio')[0] //获取audio元素\r\n        //     //  audio.play()\r\n        //                     //监听audio的timeUpdate事件\r\n        //         audio.addEventListener(\"timeupdate\", () => {\r\n        //             //获取歌曲的总长度 example: 257s\r\n        //             this.totalDuration = audio.duration\r\n        //             //获取歌曲时间\r\n        //             this.musicDuration = audio.currentTime\r\n\r\n        //             //当前歌曲播放完毕自动播放下一首\r\n        //             if (audio.currentTime >= audio.duration) {\r\n        //                 this.changeNextMusic()\r\n        //             }\r\n        //         });\r\n        //         //更新音乐播放状态\r\n        //         this.isPlay = true\r\n        // }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.middleControls>img{\r\n    width: 1rem;\r\n    height: 1rem;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}